<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Best place ever</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js"></script>
</head>
<body>
    <header>
        <img src="files/header-light.png" alt="Header Image" class="header-image">
    </header>
    <div class="main-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <!-- Theme Toggle Button -->
            <button class="theme-toggle" id="theme-toggle">
                <img src="he" alt="Toggle Theme" id="theme-icon">
            </button>
            <div class="tab-bar">
                <div class="tab-link" data-target="home">Home</div>
                <div class="tab-link" data-target="projects">Projects</div>
                <!--<div class="tab-link" data-target="contact">Contact</div>-->
                <!--<div class="tab-link" data-target="wood-working">Wood<br>Working</div>-->
                <div class="tab-link" data-target="tools">*</div>
            </div>
        </div>
        <!-- Main Content -->
        <div class="content">
            <section id="home" class="content-section active">
                <div class="profile">
                    <img src="profile.jpg" alt="Profile Image" class="profile-pic">
                    <div class="profile-text">
                        <p><span class="highlight-title">Hi, Viktor here</span></p>
                        <p>Watchmaker with a strong CS background</p>
                    </div>
                </div>
                <div class="about">
                    <h2>A bit about myself</h2>
                    <p class="narrow-text1">    
                        Just a guy with too many interests, too little time and a quiet wish for a thousand lifetimes to master it all
                        <br>
                        <!-- Animation container inserted here -->
                        <br> 
						</p>
                    <p class="narrow-text2">    
					Some of the <span class="highlight">things I greatly enjoy</span> listed as draggable and clickable nodes(they also leave white behind).
					May every topic be filled with random shit about anything and everything.
                        <div id="animation-container"></div>
						<p id="nonce">Click what you like!
						</p>
                    </p>
                    <div class="center-image">
                        <div class="logo-container">
                        </div>
                    </div>
                    <h2>Technical background</h2>
                    <p></p>
                    <ul>
                        <li><strong>[March 2023 - April 2024]</strong> 
                             <span class="text-shift">
                                Contributed to large-scale <span class="highlight">ML research</span> 
                                where we trained data-sets using grayscale height-map LiDAR images 
                                and developed <span class="highlight">triangulation</span> and <span class="highlight"> rasterization </span>algorithms
                             </span>
                        </li>
                        <li><strong>[July 2023 - July 2024]</strong> 
                             <span class="text-shift">
                                Employed as a student collaborator at the Programming Methodologies Laboratory,
                                where I worked as a <span class="highlight">Flutter developer</span>
                             </span>
                        </li>
                        <li><strong>[July 2024 - October 2024]</strong> 
                             <span class="text-shift">
                                 Worked on a solo-research with <span class="highlight">EEG</span> and <span class="highlight">force-sensing</span> devices, designed and built a 
                                 device for detecting <span class="highlight"> postsynaptic potentials</span> using "cost-effective" components
                             </span>
                        </li>
                    </ul>
                </div>
            </section>

            <section id="projects" class="content-section">
                <h2>Projects</h2>
                <div class="project-flyer">
                    <a href="project-writeup.html">
                        <img src="files/lidar/test2.png" alt="Project Image" class="project-image">
                    </a>
                    <div class="project-text">
                        <a href="project-writeups/lidar-writeup.html" class="project-title">Preprocessing data is everything in ML: Real-Time Curb Detection Using LiDAR</a>
							<div class="project-tags">
								<span class="tag">Machine Learning</span>
								<span class="tag">LiDAR</span>
								<span class="tag">Real-Time Systems</span>
							</div>
                        <p class="project-description">
                            A short write-up about technology used to achieve high accuracy 
                            “real-time” system using LiDAR to accurately detect curbs.
                        </p>
                    </div>
                </div>
                <div class="project-flyer">
                    <a href="project-writeup.html">
                        <img src="files/split_keyboard/test1.png" alt="Project Image" class="project-image">
                    </a>
                    <div class="project-text">
                        <a href="project-writeups/lidar-writeup.html" class="project-title">Preprocessing data is everything in ML: Real-Time Curb Detection Using LiDAR</a>
                        <p class="project-description">
                            A short write-up about technology used to achieve high accuracy 
                            “real-time” system using LiDAR to accurately detect curbs.
                        </p>
                    </div>
                </div>
            </section>
            <section id="contact" class="content-section">
                <h2>Contact</h2>
                <p>Content for contact goes here...</p>
            </section>
            <section id="wood-working" class="content-section">
                <h2>Wood Working</h2>
                <p>Content for wood working goes here...</p>
            </section>
            <section id="tools" class="content-section">
                <h2>My Tools</h2>
                <p>Content for wood working goes here...</p>
                <div class="button-container">
                    <a href="fonts-print.html" class="blog-button">Fonts Print</a>
                    <a href="TESTING-fonts.html" class="blog-button">Testing Fonts</a>
                    <a href="colors-testing.html" class="blog-button">Palette testing</a>
                </div>
            </section>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content"> 
            <span class="contact-info">
                <a href="mailto:ekaeoq@gmailc.com">Email</a> |
                <a href="https://twitter.com/ekaeoq" target="_blank">Twitter</a>
            </span>
            <span class="copyright">I am, but a cultivation of small thoughts that lingered</span>
        </div>
    </footer>

    <script>
        // Theme Toggle Functionality
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        const headerImage = document.querySelector('.header-image');

        function setTheme(theme) {
            if (theme === 'dark') {
                document.body.classList.add('dark-theme');
                themeIcon.src = 'files/day-and-night-2.png';
                headerImage.src = 'files/Untitledblack.png';
            } else {
                document.body.classList.remove('dark-theme');
                themeIcon.src = 'files/day-and-night-2.png';
                headerImage.src = 'files/Untitled.png';
            }
            localStorage.setItem('theme', theme);
        }

        // Apply Saved Theme on Page Load
        const savedTheme = localStorage.getItem('theme') || 'light';
        setTheme(savedTheme);

        // Toggle Theme on Button Click
        themeToggle.addEventListener('click', () => {
            const currentTheme = document.body.classList.contains('dark-theme') ? 'dark' : 'light';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            setTheme(newTheme);
        });

        // Existing Tab Switching Code
        document.querySelectorAll('.tab-link').forEach(link => {
            link.addEventListener('click', function() {
                document.querySelectorAll('.content-section').forEach(section => {
                    section.classList.remove('active');
                });
                const target = this.getAttribute('data-target');
                document.getElementById(target).classList.add('active');
            });
        });
        // Set active section based on URL hash
        const hash = window.location.hash.substring(1);
        if (hash) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            const targetSection = document.getElementById(hash);
            if (targetSection) {
                targetSection.classList.add('active');
            }
        }
    </script>
    <!-- p5.js Animation Script -->
    <script>
        // Array of skills
        let skills = ["Woodworking", "Drawing", "Piano", "Watchmaking", "Math", "Programming"];

        // URLs for each skill
        let skillURLs = {
            "Woodworking": "woodworking_index.html",
            "Drawing": "drawing_index.html",
            "Piano": "piano_index.html",
            "Watchmaking": "watchmaking_index.html",
            "Math": "math_index.html",
            "Programming": "programming_index.html"
        };
        let dragged = false;

        // Reference width for scaling
        let referenceWidth = 620;
        let scaleFactor;
        let minTextSize = 12;
        let minR = 10;

        // Node radius (will be scaled)
        let r;

        // Offset between node and label (will be scaled)
        let offset;

        // Array to store nodes
        let nodes = [];

        // Array to store particles
        let particles = [];

        // Particle class for space dust
        class Particle {
            constructor(position, velocity, hue) {
                this.position = position.copy();
                this.velocity = velocity;
                this.hue = hue;
                this.lifespan = 20; // Fades out over 20 frames
                this.initialLifespan = this.lifespan;
                this.size = random(2, 4); // Small size for subtlety
            }

            update() {
                this.position.add(this.velocity);
                this.lifespan--;
            }

            display() {
                let alpha = map(this.lifespan, 0, this.initialLifespan, 0, 255);
                fill(this.hue, 10, 100, alpha); // Light, desaturated, fading color
                noStroke();
                circle(this.position.x, this.position.y, this.size);
            }

            isExpired() {
                return this.lifespan <= 0;
            }
        }

        function setup() {
            let container = select('#animation-container');
            let containerWidth = container.elt.offsetWidth;
            let canvasHeight = containerWidth / 2; // Maintain 2:1 aspect ratio
            let canvas = createCanvas(containerWidth, canvasHeight);
            canvas.parent(container);
            colorMode(HSB);

            // Calculate scale factor based on canvas width
            scaleFactor = containerWidth / referenceWidth;
            let currentTextSize = max(minTextSize, 16 * scaleFactor);
            textSize(currentTextSize);
            r = max(minR, 15 * scaleFactor);
            offset = 10 * scaleFactor;

            generateNodes();
			canvas.style('z-index', '1');
        }

        function draw() {
            // Set background based on theme
            if (document.body.classList.contains('dark-theme')) {
                background(0); // Black for dark theme
            } else {
                background(255); // White for light theme
            }

            // Update node positions (floating animation)
            for (let node of nodes) {
                if (!node.isDragging) {
                    let angle = frameCount * 0.01 + node.phase;
                    node.currentPosition.x = node.initialPosition.x + node.ampX * sin(angle);
                    node.currentPosition.y = node.initialPosition.y + node.ampY * cos(angle);
                }
            }

            // Draw lines between consecutive nodes
            if (document.body.classList.contains('dark-theme')) {
                stroke(255); // White lines for dark theme
            } else {
                stroke(0); // Black lines for light theme
            }
            strokeWeight(1);
            for (let i = 0; i < nodes.length - 1; i++) {
                line(
                    nodes[i].currentPosition.x,
                    nodes[i].currentPosition.y,
                    nodes[i + 1].currentPosition.x,
                    nodes[i + 1].currentPosition.y
                );
            }

            // Update and draw particles (space dust)
            for (let i = particles.length - 1; i >= 0; i--) {
                particles[i].update();
                particles[i].display();
                if (particles[i].isExpired()) {
                    particles.splice(i, 1);
                }
            }

            // Draw nodes with glow and labels
            for (let node of nodes) {
                // Glow effect
                fill(node.hue, 25, 45, 100);
                noStroke();
                circle(node.currentPosition.x, node.currentPosition.y, 2 * r + 10);

                // Node
                fill(node.hue, 25, 90);
                circle(node.currentPosition.x, node.currentPosition.y, 2 * r);

                // Label
                if (document.body.classList.contains('dark-theme')) {
                    fill(255); // White text for dark theme
                } else {
                    fill(0); // Black text for light theme
                }
                text(node.label, node.currentPosition.x + r + offset, node.currentPosition.y);
            }
        }

        function mousePressed() {
            dragged = false;
            let mousePos = createVector(mouseX, mouseY);
            for (let node of nodes) {
                if (p5.Vector.dist(mousePos, node.currentPosition) < r) {
                    node.isDragging = true;
                    break;
                }
            }
        }

        function mouseDragged() {
            dragged = true;
            for (let node of nodes) {
                if (node.isDragging) {
                    node.currentPosition.set(mouseX, mouseY);
                    // Emit a space dust particle
                    let velocity = p5.Vector.random2D().mult(random(0.5, 1.5));
                    let particle = new Particle(node.currentPosition, velocity, node.hue);
                    particles.push(particle);
                }
            }
        }

        function mouseReleased() {
            for (let node of nodes) {
                if (node.isDragging) {
                    node.initialPosition.set(node.currentPosition);
                    node.isDragging = false;
                }
            }
        }

        function mouseClicked() {
            if (!dragged) {
                let mousePos = createVector(mouseX, mouseY);
                for (let node of nodes) {
                    let x = node.currentPosition.x;
                    let y = node.currentPosition.y;
                    let labelWidth = textWidth(node.label);
                    let left = x - r;
                    let right = x + r + offset + labelWidth;
                    let top = y - r;
                    let bottom = y + r;
                    if (mouseX >= left && mouseX <= right && mouseY >= top && mouseY <= bottom) {
                        let url = skillURLs[node.label];
                        if (url) {
                            window.location.href = url;
                        }
                        break;
                    }
                }
            }
        }

        function windowResized() {
            let container = select('#animation-container');
            let containerWidth = container.elt.offsetWidth;
            let canvasHeight = containerWidth / 2;
            resizeCanvas(containerWidth, canvasHeight);

            // Recalculate scale factor and update sizes
            scaleFactor = containerWidth / referenceWidth;
            let currentTextSize = max(minTextSize, 16 * scaleFactor);
            textSize(currentTextSize);
            r = max(minR, 15 * scaleFactor);
            offset = 10 * scaleFactor;

            generateNodes();
        }

        function generateNodes() {
            nodes = [];
            for (let i = 0; i < skills.length; i++) {
                let skill = skills[i];
                let position;
                let boundingBox;
                let attempts = 0;
                do {
                    position = createVector(
                        random(r + 20 * scaleFactor, width - (r + offset + textWidth(skill)) - 20 * scaleFactor),
                        random(r + 20 * scaleFactor, height - r - 20 * scaleFactor)
                    );
                    let labelWidth = textWidth(skill);
                    let left = position.x - r - 20 * scaleFactor;
                    let right = position.x + r + offset + labelWidth + 20 * scaleFactor;
                    let top = position.y - r - 10 * scaleFactor;
                    let bottom = position.y + r + 10 * scaleFactor;
                    boundingBox = { left, right, top, bottom };
                    attempts++;
                    if (attempts > 100) {
                        console.log("Could not find non-overlapping position after 100 attempts for skill: " + skill);
                        break;
                    }
                } while (nodes.some(node => boxesOverlap(boundingBox, node.boundingBox)));
                if (attempts <= 100) {
                    let hue = 200 + i * 5; // Pastel blues from hue 200 to 225
                    let ampX = random(2, 5) * scaleFactor;
                    let ampY = random(1, 3) * scaleFactor;
                    nodes.push({
                        initialPosition: position,
                        currentPosition: position.copy(),
                        label: skill,
                        hue,
                        boundingBox,
                        phase: i * TWO_PI / skills.length,
                        ampX,
                        ampY,
                        isDragging: false
                    });
                }
            }
        }

        function boxesOverlap(boxA, boxB) {
            return boxA.left < boxB.right && boxA.right > boxB.left &&
                   boxA.top < boxB.bottom && boxA.bottom > boxB.top;
        }
    </script>
</body>
</html>
